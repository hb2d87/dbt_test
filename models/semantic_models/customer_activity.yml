# models/semantic_models/customer_activity.yml
version: 2

semantic_models:
  - name: customer_activity
    model: ref('int_customer_daily_activity')
    description: |
      Customer daily activity semantic model for Brazilian e-commerce platform.
      Each row represents customer activity aggregated by day, including order counts,
      payment values, and geographic information.
    
    defaults:
      agg_time_dimension: activity_date
    
    entities:
      - name: customer_unique_id
        type: primary
        expr: customer_unique_id
      
      - name: customer_id
        type: foreign
        expr: customer_id
    
    dimensions:
      - name: activity_date
        type: time
        expr: activity_date
        type_params:
          time_granularity: day
        description: "Date when customer activity occurred"
      
      - name: customer_state
        type: categorical
        expr: customer_state
        description: "Customer's state location for geographic analysis"
      
      - name: customer_city
        type: categorical
        expr: customer_city
        description: "Customer's city location for detailed geographic analysis"
    
    measures:
      - name: unique_customers
        agg: count_distinct
        expr: customer_unique_id
        description: "Count of distinct active customers"
        label: "Active Users"
      
      - name: total_payment_value
        agg: sum
        expr: total_payment_value_sum
        description: "Sum of total payment values across all customer orders"
        label: "Total Payments"
      
      - name: voucher_value
        agg: sum
        expr: voucher_value_sum
        description: "Sum of voucher values used by customers"
        label: "Voucher Value"